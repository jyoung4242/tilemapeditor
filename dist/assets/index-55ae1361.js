(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();let je;const yn=new Uint8Array(16);function En(){if(!je&&(je=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!je))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return je(yn)}const R=[];for(let e=0;e<256;++e)R.push((e+256).toString(16).slice(1));function In(e,i=0){return(R[e[i+0]]+R[e[i+1]]+R[e[i+2]]+R[e[i+3]]+"-"+R[e[i+4]]+R[e[i+5]]+"-"+R[e[i+6]]+R[e[i+7]]+"-"+R[e[i+8]]+R[e[i+9]]+"-"+R[e[i+10]]+R[e[i+11]]+R[e[i+12]]+R[e[i+13]]+R[e[i+14]]+R[e[i+15]]).toLowerCase()}const kn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wt={randomUUID:kn};function Tn(e,i,t){if(Wt.randomUUID&&!i&&!e)return Wt.randomUUID();e=e||{};const n=e.random||(e.rng||En)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,i){t=t||0;for(let a=0;a<16;++a)i[t+a]=n[a];return i}return In(n)}class fe{constructor(){this.state="created",this.host=null,this.bindings=[],this.views=[],this.animations=[],this.animationQueue=[],this.destroyed="",this.moved=""}static create(i,t={},n,a={parent:null,prepare:!0,sibling:null}){const r=new fe;if(r.model=t,r.element=n??i,r.parent=a.parent??C,r.host=a.host??r.parent.host,n instanceof HTMLTemplateElement||n?.tagName==="TEMPLATE"){const s=n.content.cloneNode(!0);if(s.children.length===1)return C.create(i,t,s.firstElementChild,a);r.views=[...s.children].map(o=>C.create(i,t,o,{...a,parent:r})),r.state="rendered"}else r.bindings.push(...C.parse(r.element,t,r,a.parent));return r.parentElement=n!=null?i:i.ownerDocument.documentElement,r.sibling=a.sibling,r.views.length>1?r.attached=Promise.all(r.views.map(s=>s.attached)):r.attached=new Promise(s=>{r.attachResolve=s}),r}destroy(){this.views.forEach(i=>i.destroy()),this.element.classList.add("pui-removing"),this.destroyed="queue",C.destroyed.push(this)}terminate(){Promise.all(this.getAnimations()).then(()=>{this.element.parentElement?.removeChild(this.element),this.bindings.forEach(t=>t.unbind());const i=this.parent.views.findIndex(t=>t===this);i>-1&&this.parent.views.splice(i,1)}),this.destroyed="destroyed"}move(i){this.moved="queue",this.element.classList.add("pui-moving"),this.sibling=i}play(i,t){return typeof i=="string"&&(i=this.animations.find(n=>n.name===i).clone()),i.element=t,i.state="pending",this.animationQueue.push(i),this.updateAnimations(performance.now()),i}updateFromUI(){this.views.forEach(i=>i.updateFromUI()),this.bindings.forEach(i=>i.updateFromUI())}updateToUI(){switch(this.views.forEach(i=>i.updateToUI()),this.bindings.forEach(i=>i.updateToUI()),this.state){case"created":this.element.classList.add("pui-adding"),this.element.hasAttribute("PUI-UNRENDERED")||(this.parentElement??C.parentElement(this.element,this.parent)).insertBefore(this.element,this.sibling?.nextSibling??null),this.attachResolve(),this.state="attaching";break;case"attaching":this.getAnimations(!1).length===0&&(this.element.classList.remove("pui-adding"),this.state="attached");break;case"attached":this.state="rendered";break}}updateAtEvents(){this.views.forEach(i=>i.updateAtEvents()),this.bindings.forEach(i=>i.updateAtEvents())}updateAnimations(i){for(;this.animationQueue[0]?.state==="finished";)this.animationQueue.shift().destroy();for(let t=0;t<this.animationQueue.length;t++){const n=this.animationQueue[t];n.state==="pending"&&(n.isBlocked(i)||(n.state="playing",n.startTime=i,n.animation=n.element.animate(n.keyframes,n.options),n.finished=n.animation.finished,n.finished.then(()=>{n.state="finished",this.updateAnimations(performance.now())})))}}updateMove(){switch(this.moved){case"queue":this.moved="move";break;case"move":this.getAnimations().length===0&&(C.parentElement(this.element,this.parent).insertBefore(this.element,this.sibling.nextSibling),this.element.classList.remove("pui-moving"),this.moved="",this.sibling=null);break}this.bindings.forEach(i=>i.updateMove())}getAnimations(i=!0){return this.element.getAnimations({subtree:i}).filter(t=>t.playState!=="finished"&&t.effect?.getTiming().iterations!==1/0).map(t=>t.finished)}}class Rt{constructor(){this.fromUI=!1,this.toUI=!0,this.atEvent=!1,this.oneTime=!1,this.views=[],this.firstUpdate=!0,this.events=[],this.triggerAtEvent=i=>{i.type==="change"?this.events.push(i):C.resolveValue(this.object,this.property)(i,this.object.$model,this.element,this.attribute,this.object)},this.twoWayBindingEvent=i=>{const{target:t,property:n}=C.resolveProperty(this.object,this.property),a=i.detail;if(a!==this.lastUIValue){let r=a;r!==void 0&&r!==this.lastValue&&C.resolveValue(this.object,this.property)==="number"&&!isNaN(r)&&(r=+r),t[n]=r}},this.id=++C.id}get element(){return this.$element==null&&(this.$element=typeof this.selector=="string"?this.context.querySelector(this.selector):this.selector),this.$element}set element(i){this.$element=i}static create(i){const t=new Rt,n=i.property?.split(":")??[],a=n.shift();return t.object="$model"in i.object?i.object:{$model:i.object},t.property=a,t.arguments=n,t.context=i.context??document,t.selector=i.selector,t.attribute=i.attribute??"innerText",t.value=i.value??t.value,t.template=i.template??t.template,t.fromUI=i.fromUI??t.fromUI,t.toUI=i.toUI??t.toUI,t.atEvent=i.atEvent??t.atEvent,t.oneTime=i.oneTime??t.oneTime,t.parent=i.parent??C,t.addListener(),typeof t.fromUI!="boolean"&&(t.fromUI=t.fromUI.bind(t)),typeof t.toUI!="boolean"&&(t.toUI=t.toUI.bind(t)),t}destroy(){this.element=null,this.removeListener(),this.views.forEach(i=>i.destroy())}unbind(){C.unbind(this)}addListener(){this.atEvent&&(this.toUI=!1,this.fromUI=!1,this.element.addEventListener(this.attribute,this.triggerAtEvent)),this.toUI&&this.fromUI&&customElements.get(this.element.tagName.toLowerCase())!=null&&this.element.addEventListener(this.attribute,this.twoWayBindingEvent)}removeListener(){this.atEvent&&this.element.removeEventListener(this.attribute,this.triggerAtEvent),this.toUI&&this.fromUI&&customElements.get(this.element.tagName.toLowerCase())!=null&&this.element.removeEventListener(this.attribute,this.twoWayBindingEvent)}updateFromUI(){if(this.fromUI===!1||this.firstUpdate){this.firstUpdate=!1,this.views.forEach(a=>a.updateFromUI());return}const{target:i,property:t}=C.resolveProperty(this.element,this.attribute),n=i[t];if(n!==this.lastUIValue){let a=this.fromUI!==!0?this.fromUI(n,this.lastUIValue,this.property,this.object):n;if(this.lastUIValue=n,a!==void 0&&a!==this.lastValue){this.lastValue=a;const{target:r,property:s}=C.resolveProperty(this.object,this.property);C.resolveValue(this.object,this.property)==="number"&&!isNaN(a)&&(a=+a),r[s]=a}else this.lastValue=a;this.parent.host?.dispatchEvent(new CustomEvent(t,{detail:a}))}this.views.forEach(a=>a.updateFromUI())}updateToUI(){if(this.toUI===!1){this.views.forEach(t=>t.updateToUI());return}let i=C.resolveValue(this.object,this.property);if(this.template!=null)if(this.template instanceof HTMLElement)if(typeof this.attribute=="boolean"){if(i=(i??!1)!==!1,i!==this.lastValue){const t=this.toUI!==!0?this.toUI(i,this.lastValue,this.property,this.object,this.value):i;t!==void 0&&t!==this.lastUIValue&&(t===this.attribute?this.views.push(fe.create(this.element.parentElement,this.object,this.template.cloneNode(!0),{parent:this,prepare:!1,sibling:this.element})):this.views.pop()?.destroy(),this.lastValue=i,this.lastUIValue=t)}}else{let t=!1,n=!1;i==null&&(i=[]);const a=this.arguments[0],r=this.lastValue??[];if(i.length!==r.length)t=!0;else for(let c=0,u=i.length;c<u;c++){let f,p;a==null?i[c]!==r[c]&&(t=!0,n=!0):(f=C.resolveValue(i[c]??{},a),p=C.resolveValue(r[c]??{},a),f!==p&&(t=!0),i[c]!==r[c]&&(n=!0))}if(!t)if(n){const c=this.toUI!==!0?this.toUI(i,r,this.property,this.object,this.value):i;return this.updateViews(i,c)}else return this.updateViews();const s=this.toUI!==!0?this.toUI(i,r,this.property,this.object,this.value):i;if(s==null)return this.updateViews();const o=this.lastUIValue??[];let d=0;for(let c=0,u=s.length,f=0;c<u;c++,f++){let p,b;if(a==null?(p=s[c],b=o[f]):(p=C.resolveValue(s[c]??{},a),b=C.resolveValue(o[f]??{},a)),p===b)d++;else break}if(d===s.length&&s.length===o.length)return this.updateViews(i,s);const l=this.views.splice(0,d);let h=l[l.length-1];for(let c=d,u=s.length,f=d;c<u;c++,f++){const p=s[c],b=this.views.shift();if(b==null){const _={$model:{[this.attribute]:p},$parent:this.object},x=fe.create(this.element.parentElement,_,this.template.cloneNode(!0),{parent:this,prepare:!1,sibling:h?.element??this.element});l.push(x),h=x;continue}const v=a==null?p:C.resolveValue(p??{},a),g=b?.model.$model[this.attribute],E=a==null?g:C.resolveValue(g??{},a);if(v===E){l.push(b),b.move(h?.element??this.element),h=b;continue}if(!s.slice(c).map(_=>a==null?_:C.resolveValue(_??{},a)).includes(E)){b.destroy(),c--,h=b;continue}this.views.unshift(b);let y=!1;for(let _=0,x=this.views.length;_<x;_++){const U=this.views[_],m=U?.model.$model[this.attribute],T=a==null?m:C.resolveValue(m??{},a);if(v===T){l.push(...this.views.splice(_,1)),U.move(h?.element??this.element),y=!0,h=U;break}}if(!y){const _={$model:{[this.attribute]:p},$parent:this.object},x=fe.create(this.element.parentElement,_,this.template.cloneNode(!0),{parent:this,prepare:!1,sibling:h?.element??this.element});l.push(x),h=x}}return this.views.forEach(c=>c.destroy()),this.views=l,this.updateViews(i,s)}else{const t=C.resolveValue(this.object,this.attribute);if((i??t)==null||(i??t)!==this.lastValue){this.lastUIValue!=null&&(this.lastUIValue.destroy(),this.lastUIValue=null);const n=i==null?t:t.create(i),a=t.template;this.lastValue=i??t;const r=this.element.nodeType===8?this.element.parentElement:this.element,s=this.element.nodeType===8?this.element:null;this.lastUIValue=C.create(r,n,a,{parent:this,prepare:!0,sibling:s}),this.views.push(this.lastUIValue)}}else if(i!==this.lastValue){const t=this.toUI!==!0?this.toUI(i,this.lastValue,this.property,this.object,this.value):i;if(t!==void 0&&t!==this.lastUIValue){const{target:n,property:a}=C.resolveProperty(this.element,this.attribute);n[a]=t,"setAttribute"in this.element&&this.element.setAttribute(this.attribute,t),this.lastValue=i,this.lastUIValue=t}}this.updateViews()}updateAtEvents(){let i=this.events.shift();for(;i!=null;)C.resolveValue(this.object,this.property)(i,this.object.$model,this.element,this.attribute,this.object),i=this.events.shift();this.views.forEach(t=>t.updateAtEvents())}updateMove(){this.views.forEach(i=>i.updateMove())}updateViews(i,t){i==null?this.views.forEach(n=>n.updateToUI()):(this.views.forEach((n,a)=>{const r=t[a];typeof r=="object"&&(r.$index=a),n.model.$model[this.attribute]=r,n.model.$index=a,n.updateToUI()}),this.lastValue=[...i],this.lastUIValue=[...t]),this.oneTime&&(this.toUI=!1,this.fromUI=!1)}}var bt;class ${static initialize(i=!0){if(!this.initialized&&(this.initialized=!0,this.initializeLoadPromise(),i!==!1)){if(i===!0){const t=()=>{this.update(),requestAnimationFrame(t)};requestAnimationFrame(t);return}setInterval(()=>this.update(),1e3/i)}}static import(i){this.initializeLoadPromise(),document.body.insertAdjacentHTML("afterbegin",`<object type="text/pui" data="${i}"></object>`)}static ready(){return this.initialize(),this.loadPromise.then(()=>(this.hoist()&&document.head.insertAdjacentHTML("beforeend",'<style> object[type="text/pui"] { height: 0; position: absolute; } </style>'),this.registrations))}static create(i=document.body,t={},n=null,a={parent:null,prepare:!0,sibling:null}){if(typeof i=="string"&&(i=document.querySelector(i)),(typeof t=="string"||t instanceof HTMLElement)&&(console.warn("Old parameter order to UI.create!"),[t,n]=[n,t]),typeof n=="string"){const s=i?.ownerDocument?.defaultView!=null?i.ownerDocument:document;if(n.startsWith("#"))n=s.querySelector(n);else{const o=s.createElement("template");o.innerHTML=a.prepare?this.prepare(n):n,n=o}}const r=fe.create(i,t,n,a);return r.parent===C&&this.views.push(r),this.initialize(),r}static play(i,t){return typeof i=="string"?(i=this.globals.animations.find(n=>n.name===i).clone(),i.play(t)):i.play()}static queue(i){this.t.push(i)}static register(i,t){if(typeof i=="string"){this.registrations[i]=t;return}this.registerWebComponent(t,i)}static parse(i,t,n,a){const r=[];if(i instanceof Comment)return[];if(i instanceof HTMLTemplateElement||i.tagName==="TEMPLATE")return[];if(i.nodeType===3){let s=i.textContent,o=s.match(this.regexValue);for(;o!=null;){const d=o[1];let l=o[2];s=o[3];let h=!1;l.startsWith("|")&&(h=!0,l=l.slice(1).trimStart());const c=l.match(this.regexConditionalValue);let u,f=!0;if(l.startsWith("(")){const b=`_pui${this.bindingCounter++}`;Object.defineProperty(t,b,{get:new Function(`return ${l}`)}),l=b}else c&&(l=c[3],u=`${c[2]}${c[1]}`,f=function(b,v,g,E,y){const _=y[0]==="=";return y=y.slice(2,-1),!!b===_?y:""});let p=i.cloneNode();i.textContent=d,this.parentElement(i,a).insertBefore(p,i.nextSibling),r.push(this.bind({selector:p,attribute:"textContent",object:t,property:l,parent:n,oneTime:h,value:u,toUI:f})),i=p,p=i.cloneNode(),p.textContent=s,this.parentElement(i,a).insertBefore(p,i.nextSibling),i=p,o=s.match(this.regexValue)}}else{const s=i.getAttribute("pui")??"";if(s.trim().length>0){const o=s.split(";");for(let d of o)d=d.trim(),d.length>0&&i.setAttribute(`pui.${this.bindingCounter++}`,d)}if(i.removeAttribute("pui"),r.push(...Object.keys(i.attributes??[]).reverse().map(o=>{const d=[];if(i instanceof Comment)return[];const l=i.attributes[o];if(l.name.startsWith("pui.")){const f=l.value.match(this.regexAttribute);let[p,b,v,g,E]=f,y,_,x=!1;if(v!=="@"){const U=b.match(/^'(.*?)'$/);if(U!=null)y=U[1],i.setAttribute("value",y),b=i.nodeName.toLowerCase()==="option"?"selected":"checked",g=m=>m?y:void 0,v=m=>m===y;else if(b==="")if(g===">"){const{target:m,property:T}=this.resolveProperty(t,E);return m[T]=i,[]}else{const m=document.createComment(l.name);this.parentNode(i,a).insertBefore(m,i),this.parentNode(i,a).removeChild(i),i.removeAttribute(l.name),_=i,i=m,b=v==="=",v=!0,g==="|"&&(x=!0)}else if(g==="="&&v==="="){if(!i.tagName.includes("-")){i.setAttribute("pui-unrendered","");const m=this.parentNode(i,a);if(m.nodeType!==8){const T=document.createComment(l.name);m.insertBefore(T,i),m.removeChild(i),i.removeAttribute(l.name),i=T}else i=m}_=b,v=!0}else if(g==="*"){const m=document.createComment(l.name);this.parentNode(i,a).insertBefore(m,i),this.parentNode(i,a).removeChild(i),i.removeAttribute(l.name),_=i,i=m}else g==="|"?x=!0:b!=="checked"&&i.setAttribute(b,i.getAttribute?.(b)??"")}return[this.bind({selector:i,attribute:b,value:y,object:t,property:E,template:_,toUI:typeof v=="string"?v==="<":v,fromUI:typeof g=="string"?g===">":g,atEvent:v==="@",parent:n,oneTime:x})]}const h=[l.value];let c=0,u=h[c].match(this.regexValue);for(;u!=null;){let{before:f,property:p,after:b}=u.groups,v=!1;p.startsWith("|")&&(v=!0,p=p.slice(1).trimStart());const g=p.match(this.regexConditionalValue);let E;g&&(p=g[3],E=`${g[2]}${g[1]}`),d.push(this.bind({selector:i,attribute:l.name,object:t,property:p,oneTime:v,toUI(y,_,x,U,m){if(this.oneTime){const I=h.indexOf(x);I>-1&&(h[I]=C.resolveValue(U,x),h[I-1]+=h[I]+h[I+1],h.splice(I,2))}const T=h.map((I,k)=>{if(k%2===0)return I;const S=I.match(C.regexSplitConditionalValue);if(S){const q=I===`${x}${m}`?y:C.resolveValue(U,S[1]),Pe=S[2]==="=";return!!q===Pe?S[3].slice(1,-1):""}return I===x?y:C.resolveValue(U,I)}).join("");return i.setAttribute(l.name,T),T},parent:n,value:E})),h[c++]=f,h[c++]=`${p}${E??""}`,h[c]=b,u=h[c].match(this.regexValue)}return d}).flat()),i instanceof Comment)return r.filter(o=>o.template!=null?!0:(o.unbind(),!1));if(!this.leaveAttributes)for(let o=Object.keys(i.attributes??[]).length-1;o>=0;o--){const d=i.attributes[Object.keys(i.attributes??[])[o]];d.name.startsWith("pui.")&&i.removeAttribute(d.name)}r.push(...Array.from(i.childNodes).map(o=>this.parse(o,t,n,a)).flat())}return r}static bind(i){return Rt.create(i)}static unbind(i){if(i.destroy(),i.parent!==C){const t=i.parent.bindings,n=t.indexOf(i);n>-1&&t.splice(n,1)}}static update(){this.i.forEach(t=>t()),this.i=this.t,this.t=[],this.views.forEach(t=>t.updateToUI()),this.views.forEach(t=>t.updateFromUI()),this.views.forEach(t=>t.updateAtEvents());const i=performance.now();[...this.views,this.globals].forEach(t=>t.updateAnimations(i)),this.views.forEach(t=>{t.updateMove()}),this.destroyed.forEach(t=>{switch(t.destroyed){case"queue":t.state==="rendered"?t.destroyed="destroy":t.updateToUI();break;case"destroy":{t.terminate();const n=this.destroyed.findIndex(a=>t===a);n>-1&&this.destroyed.splice(n,1)}}})}static resolveProperty(i,t){t=t.replace("[",".").replace("]",".");const n=t.split(".").filter(r=>(r??"").length>0);for(;n[0]==="$parent"&&i.$parent!=null;)i=i.$parent,n.shift();let a=i;if(n[0]==="$index"&&this.objectHas(a,"$index"))return{target:a,property:n[0]};for(this.objectHas(a,"$model")&&(a=i.$model);n.length>1;)a=a[n.shift()];return{target:a,property:n[0]}}static resolveValue(i,t){let n=0;do{const{target:a,property:r}=this.resolveProperty(i,t);if(a!=null&&this.objectHas(a,r))return a[r];i=i.$parent}while(i!=null&&n++<1e3);if(t in this.registrations)return this.registrations[t]}static initializeLoadPromise(){this.loadPromise==null&&(this.loadPromise=new Promise(i=>this.loadResolve=i),document.defaultView?.addEventListener("load",this.loaded))}static hoist(i=document,t=document){i!==t&&((t.querySelectorAll("style")??[]).forEach(r=>{i.head.appendChild(r.cloneNode(!0))}),(t.querySelectorAll("template")??[]).forEach(r=>{i.head.appendChild(r.cloneNode(!0))}));const n=t.querySelectorAll('object[type="text/pui"]')??[];let a=n.length>0;return n.forEach(r=>{a=this.hoist(i,r.contentDocument)||a}),a}static objectHas(i,t){try{return t in i}catch{return!1}}static parentElement(i,t){const n=i.parentElement;if(n!=null)return n;for(;t!=null&&(t.element==null||t.element===i);)t=t.parent;return t?.element}static parentNode(i,t){const n=i.parentNode;if(n!=null)return n;for(;t!=null&&(t.element==null||t.element===i);)t=t.parent;return t?.element}static prepare(i){let t=i;i="";let n=t.match(this.regexReplace);for(;n!=null;){const[a,r,s,o]=n;s.match(/\S\s*===/)?i+=`${r.trimEnd()}br PUI.${this.bindingCounter++}="${s}"`:i+=`${r} PUI.${this.bindingCounter++}="${s}" `,t=o,n=t.match(this.regexReplace)}return i+=t,i}static parseAttribute(i,t,n,a,r,s){const o=s.match(this.regexAttribute);let[d,l,h,c,u]=o,f,p,b=!1;if(h!=="@"){const v=l.match(/^'(.*?)'$/);if(v!=null)f=v[1],i.setAttribute("value",f),l=i.nodeName.toLowerCase()==="option"?"selected":"checked",c=g=>g?f:void 0,h=g=>g===f;else if(l==="")if(c===">"){const{target:g,property:E}=this.resolveProperty(t,u);return g[E]=i,[]}else{const g=document.createComment(r);this.parentNode(i,a).insertBefore(g,i),this.parentNode(i,a).removeChild(i),i.removeAttribute(r),p=i,i=g,l=h==="=",h=!0,c==="|"&&(b=!0)}else if(c==="="&&h==="="){const g=this.parentNode(i,a);if(g.nodeType!==8){const E=document.createComment(r);g.insertBefore(E,i),g.removeChild(i),i.removeAttribute(r),i=E}else i=g;p=l,b=!0,h=!0}else if(c==="*"){const g=document.createComment(r);this.parentNode(i,a).insertBefore(g,i),this.parentNode(i,a).removeChild(i),i.removeAttribute(r),p=i,i=g}else c==="|"?b=!0:l!=="checked"&&i.setAttribute(l,"")}return[this.bind({selector:i,attribute:l,value:f,object:t,property:u,template:p,toUI:typeof h=="string"?h==="<":h,fromUI:typeof c=="string"?c===">":c,atEvent:h==="@",parent:n,oneTime:b})]}static registerWebComponent(i,t){i??(i=t.webComponent);class n extends HTMLElement{constructor(){super(),this.webComponentComponent=t,this.webComponentUIView=null,this.attachShadow({mode:"open"})}connectedCallback(){this.initialize()}disconnectedCallback(){this.terminate()}attributeChangedCallback(s,o,d){this.initialize(),this.webComponentUIView.model[s]=d}initialize(){if(this.webComponentUIView==null){const s="create"in this.webComponentComponent?this.webComponentComponent.create():new this.webComponentComponent;s.webComponentHost=this,this.webComponentUIView=C.create(this.shadowRoot,s,this.webComponentComponent.template,{host:this.shadowRoot?.host})}}terminate(){this.webComponentUIView!=null&&this.webComponentUIView.destroy()}}n.observedAttributes=t.observedAttributes??[],n.observedProperties=t.observedProperties??n.observedAttributes;const a=[...new Set([...n.observedAttributes,...n.observedProperties])];for(const r of a)Object.defineProperty(n.prototype,r,{configurable:!0,enumerable:!1,get(){return this.webComponentUIView.model[r]},set(s){n.observedAttributes.includes(r)?this.setAttribute(r,s):(this.initialize(),this.webComponentUIView.model[r]=s)}});return customElements.define(i,n),n}}bt=$;$.initialized=!1;$.id=0;$.views=[];$.destroyed=[];$.globals=new fe;$.registrations={};$.leaveAttributes=!1;$.regexReplace=/([\S\s]*?)\\?\$\{([^}]*?[<=@!]=[*=>|][^}]*?)\}([\S\s]*)/m;$.regexAttribute=/^\s*(\S*?)\s*([<=@!])=([*=>|])\s*(\S*?)\s*$/;$.regexValue=/(?<before>[\S\s]*?)\\?\$\{\s*(?<property>[\s\S]*?)\s*\}(?<after>[\S\s]*)/m;$.regexConditionalValue=/^\s*(.+?)\s*([=!])\s*(\S+)/;$.regexSplitConditionalValue=/^(.+?)([=!])(.*)/;$.bindingCounter=0;$.i=[];$.t=[];$.loaded=()=>{bt.loadResolve(),document.defaultView?.removeEventListener("load",bt.loaded)};function Sn(){let e=window,i=window;for(;;)try{if(e.parent===e){i=e;break}else e.parent.UI!=="guarantee-condition-always-true"&&(e=e.parent)}catch{break}return i}const vt=Sn();"UI"in vt||(vt.UI=$);const C=vt.UI;var Lt={},G={},ve={},K={},xe={};const Cn=4,Bt=0,jt=1,An=2;function ye(e){let i=e.length;for(;--i>=0;)e[i]=0}const Un=0,Di=1,zn=2,Dn=3,$n=258,Nt=29,He=256,De=He+1+Nt,me=30,Ot=19,$i=2*De+1,se=15,rt=16,Rn=7,Ht=256,Ri=16,Li=17,Ni=18,xt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Qe=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ln=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Oi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Nn=512,J=new Array((De+2)*2);ye(J);const Ae=new Array(me*2);ye(Ae);const $e=new Array(Nn);ye($e);const Re=new Array($n-Dn+1);ye(Re);const Mt=new Array(Nt);ye(Mt);const Je=new Array(me);ye(Je);function lt(e,i,t,n,a){this.static_tree=e,this.extra_bits=i,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let Hi,Mi,Vi;function st(e,i){this.dyn_tree=e,this.max_code=0,this.stat_desc=i}const Zi=e=>e<256?$e[e]:$e[256+(e>>>7)],Le=(e,i)=>{e.pending_buf[e.pending++]=i&255,e.pending_buf[e.pending++]=i>>>8&255},H=(e,i,t)=>{e.bi_valid>rt-t?(e.bi_buf|=i<<e.bi_valid&65535,Le(e,e.bi_buf),e.bi_buf=i>>rt-e.bi_valid,e.bi_valid+=t-rt):(e.bi_buf|=i<<e.bi_valid&65535,e.bi_valid+=t)},j=(e,i,t)=>{H(e,t[i*2],t[i*2+1])},Fi=(e,i)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--i>0);return t>>>1},On=e=>{e.bi_valid===16?(Le(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Hn=(e,i)=>{const t=i.dyn_tree,n=i.max_code,a=i.stat_desc.static_tree,r=i.stat_desc.has_stree,s=i.stat_desc.extra_bits,o=i.stat_desc.extra_base,d=i.stat_desc.max_length;let l,h,c,u,f,p,b=0;for(u=0;u<=se;u++)e.bl_count[u]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<$i;l++)h=e.heap[l],u=t[t[h*2+1]*2+1]+1,u>d&&(u=d,b++),t[h*2+1]=u,!(h>n)&&(e.bl_count[u]++,f=0,h>=o&&(f=s[h-o]),p=t[h*2],e.opt_len+=p*(u+f),r&&(e.static_len+=p*(a[h*2+1]+f)));if(b!==0){do{for(u=d-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[d]--,b-=2}while(b>0);for(u=d;u!==0;u--)for(h=e.bl_count[u];h!==0;)c=e.heap[--l],!(c>n)&&(t[c*2+1]!==u&&(e.opt_len+=(u-t[c*2+1])*t[c*2],t[c*2+1]=u),h--)}},Pi=(e,i,t)=>{const n=new Array(se+1);let a=0,r,s;for(r=1;r<=se;r++)a=a+t[r-1]<<1,n[r]=a;for(s=0;s<=i;s++){let o=e[s*2+1];o!==0&&(e[s*2]=Fi(n[o]++,o))}},Mn=()=>{let e,i,t,n,a;const r=new Array(se+1);for(t=0,n=0;n<Nt-1;n++)for(Mt[n]=t,e=0;e<1<<xt[n];e++)Re[t++]=n;for(Re[t-1]=n,a=0,n=0;n<16;n++)for(Je[n]=a,e=0;e<1<<Qe[n];e++)$e[a++]=n;for(a>>=7;n<me;n++)for(Je[n]=a<<7,e=0;e<1<<Qe[n]-7;e++)$e[256+a++]=n;for(i=0;i<=se;i++)r[i]=0;for(e=0;e<=143;)J[e*2+1]=8,e++,r[8]++;for(;e<=255;)J[e*2+1]=9,e++,r[9]++;for(;e<=279;)J[e*2+1]=7,e++,r[7]++;for(;e<=287;)J[e*2+1]=8,e++,r[8]++;for(Pi(J,De+1,r),e=0;e<me;e++)Ae[e*2+1]=5,Ae[e*2]=Fi(e,5);Hi=new lt(J,xt,He+1,De,se),Mi=new lt(Ae,Qe,0,me,se),Vi=new lt(new Array(0),Ln,0,Ot,Rn)},Wi=e=>{let i;for(i=0;i<De;i++)e.dyn_ltree[i*2]=0;for(i=0;i<me;i++)e.dyn_dtree[i*2]=0;for(i=0;i<Ot;i++)e.bl_tree[i*2]=0;e.dyn_ltree[Ht*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Bi=e=>{e.bi_valid>8?Le(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Yt=(e,i,t,n)=>{const a=i*2,r=t*2;return e[a]<e[r]||e[a]===e[r]&&n[i]<=n[t]},ot=(e,i,t)=>{const n=e.heap[t];let a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&Yt(i,e.heap[a+1],e.heap[a],e.depth)&&a++,!Yt(i,n,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=n},Xt=(e,i,t)=>{let n,a,r=0,s,o;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+r++]&255,n+=(e.pending_buf[e.sym_buf+r++]&255)<<8,a=e.pending_buf[e.sym_buf+r++],n===0?j(e,a,i):(s=Re[a],j(e,s+He+1,i),o=xt[s],o!==0&&(a-=Mt[s],H(e,a,o)),n--,s=Zi(n),j(e,s,t),o=Qe[s],o!==0&&(n-=Je[s],H(e,n,o)));while(r<e.sym_next);j(e,Ht,i)},yt=(e,i)=>{const t=i.dyn_tree,n=i.stat_desc.static_tree,a=i.stat_desc.has_stree,r=i.stat_desc.elems;let s,o,d=-1,l;for(e.heap_len=0,e.heap_max=$i,s=0;s<r;s++)t[s*2]!==0?(e.heap[++e.heap_len]=d=s,e.depth[s]=0):t[s*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=n[l*2+1]);for(i.max_code=d,s=e.heap_len>>1;s>=1;s--)ot(e,t,s);l=r;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ot(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,t[l*2]=t[s*2]+t[o*2],e.depth[l]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,t[s*2+1]=t[o*2+1]=l,e.heap[1]=l++,ot(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Hn(e,i),Pi(t,d,e.bl_count)},Gt=(e,i,t)=>{let n,a=-1,r,s=i[0*2+1],o=0,d=7,l=4;for(s===0&&(d=138,l=3),i[(t+1)*2+1]=65535,n=0;n<=t;n++)r=s,s=i[(n+1)*2+1],!(++o<d&&r===s)&&(o<l?e.bl_tree[r*2]+=o:r!==0?(r!==a&&e.bl_tree[r*2]++,e.bl_tree[Ri*2]++):o<=10?e.bl_tree[Li*2]++:e.bl_tree[Ni*2]++,o=0,a=r,s===0?(d=138,l=3):r===s?(d=6,l=3):(d=7,l=4))},Kt=(e,i,t)=>{let n,a=-1,r,s=i[0*2+1],o=0,d=7,l=4;for(s===0&&(d=138,l=3),n=0;n<=t;n++)if(r=s,s=i[(n+1)*2+1],!(++o<d&&r===s)){if(o<l)do j(e,r,e.bl_tree);while(--o!==0);else r!==0?(r!==a&&(j(e,r,e.bl_tree),o--),j(e,Ri,e.bl_tree),H(e,o-3,2)):o<=10?(j(e,Li,e.bl_tree),H(e,o-3,3)):(j(e,Ni,e.bl_tree),H(e,o-11,7));o=0,a=r,s===0?(d=138,l=3):r===s?(d=6,l=3):(d=7,l=4)}},Vn=e=>{let i;for(Gt(e,e.dyn_ltree,e.l_desc.max_code),Gt(e,e.dyn_dtree,e.d_desc.max_code),yt(e,e.bl_desc),i=Ot-1;i>=3&&e.bl_tree[Oi[i]*2+1]===0;i--);return e.opt_len+=3*(i+1)+5+5+4,i},Zn=(e,i,t,n)=>{let a;for(H(e,i-257,5),H(e,t-1,5),H(e,n-4,4),a=0;a<n;a++)H(e,e.bl_tree[Oi[a]*2+1],3);Kt(e,e.dyn_ltree,i-1),Kt(e,e.dyn_dtree,t-1)},Fn=e=>{let i=4093624447,t;for(t=0;t<=31;t++,i>>>=1)if(i&1&&e.dyn_ltree[t*2]!==0)return Bt;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return jt;for(t=32;t<He;t++)if(e.dyn_ltree[t*2]!==0)return jt;return Bt};let qt=!1;const Pn=e=>{qt||(Mn(),qt=!0),e.l_desc=new st(e.dyn_ltree,Hi),e.d_desc=new st(e.dyn_dtree,Mi),e.bl_desc=new st(e.bl_tree,Vi),e.bi_buf=0,e.bi_valid=0,Wi(e)},ji=(e,i,t,n)=>{H(e,(Un<<1)+(n?1:0),3),Bi(e),Le(e,t),Le(e,~t),t&&e.pending_buf.set(e.window.subarray(i,i+t),e.pending),e.pending+=t},Wn=e=>{H(e,Di<<1,3),j(e,Ht,J),On(e)},Bn=(e,i,t,n)=>{let a,r,s=0;e.level>0?(e.strm.data_type===An&&(e.strm.data_type=Fn(e)),yt(e,e.l_desc),yt(e,e.d_desc),s=Vn(e),a=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=a&&(a=r)):a=r=t+5,t+4<=a&&i!==-1?ji(e,i,t,n):e.strategy===Cn||r===a?(H(e,(Di<<1)+(n?1:0),3),Xt(e,J,Ae)):(H(e,(zn<<1)+(n?1:0),3),Zn(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Xt(e,e.dyn_ltree,e.dyn_dtree)),Wi(e),n&&Bi(e)},jn=(e,i,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=i,e.pending_buf[e.sym_buf+e.sym_next++]=i>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,i===0?e.dyn_ltree[t*2]++:(e.matches++,i--,e.dyn_ltree[(Re[t]+He+1)*2]++,e.dyn_dtree[Zi(i)*2]++),e.sym_next===e.sym_end);xe._tr_init=Pn;xe._tr_stored_block=ji;xe._tr_flush_block=Bn;xe._tr_tally=jn;xe._tr_align=Wn;const Yn=(e,i,t,n)=>{let a=e&65535|0,r=e>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do a=a+i[n++]|0,r=r+a|0;while(--s);a%=65521,r%=65521}return a|r<<16|0};var Yi=Yn;const Xn=()=>{let e,i=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;i[t]=e}return i},Gn=new Uint32Array(Xn()),Kn=(e,i,t,n)=>{const a=Gn,r=n+t;e^=-1;for(let s=n;s<r;s++)e=e>>>8^a[(e^i[s])&255];return e^-1};var Xi=Kn,Vt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ue={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:qn,_tr_stored_block:Et,_tr_flush_block:Qn,_tr_tally:ae,_tr_align:Jn}=xe,Gi=Yi,te=Xi,ea=Vt,{Z_NO_FLUSH:re,Z_PARTIAL_FLUSH:ta,Z_FULL_FLUSH:ia,Z_FINISH:Z,Z_BLOCK:Qt,Z_OK:L,Z_STREAM_END:Jt,Z_STREAM_ERROR:Y,Z_DATA_ERROR:na,Z_BUF_ERROR:ht,Z_DEFAULT_COMPRESSION:aa,Z_FILTERED:ra,Z_HUFFMAN_ONLY:Ye,Z_RLE:la,Z_FIXED:sa,Z_DEFAULT_STRATEGY:oa,Z_UNKNOWN:ha,Z_DEFLATED:it}=ue,fa=9,da=15,ca=8,ua=29,pa=256,It=pa+1+ua,_a=30,ga=19,ma=2*It+1,wa=15,A=3,ne=258,X=ne+A+1,ba=32,we=42,Zt=57,kt=69,Tt=73,St=91,Ct=103,oe=113,Se=666,O=1,Ee=2,de=3,Ie=4,va=3,he=(e,i)=>(e.msg=ea[i],i),ei=e=>e*2-(e>4?9:0),ie=e=>{let i=e.length;for(;--i>=0;)e[i]=0},xa=e=>{let i,t,n,a=e.w_size;i=e.hash_size,n=i;do t=e.head[--n],e.head[n]=t>=a?t-a:0;while(--i);i=a,n=i;do t=e.prev[--n],e.prev[n]=t>=a?t-a:0;while(--i)};let ya=(e,i,t)=>(i<<e.hash_shift^t)&e.hash_mask,le=ya;const M=e=>{const i=e.state;let t=i.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+t),e.next_out),e.next_out+=t,i.pending_out+=t,e.total_out+=t,e.avail_out-=t,i.pending-=t,i.pending===0&&(i.pending_out=0))},V=(e,i)=>{Qn(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,i),e.block_start=e.strstart,M(e.strm)},z=(e,i)=>{e.pending_buf[e.pending++]=i},Te=(e,i)=>{e.pending_buf[e.pending++]=i>>>8&255,e.pending_buf[e.pending++]=i&255},At=(e,i,t,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,i.set(e.input.subarray(e.next_in,e.next_in+a),t),e.state.wrap===1?e.adler=Gi(e.adler,i,a,t):e.state.wrap===2&&(e.adler=te(e.adler,i,a,t)),e.next_in+=a,e.total_in+=a,a)},Ki=(e,i)=>{let t=e.max_chain_length,n=e.strstart,a,r,s=e.prev_length,o=e.nice_match;const d=e.strstart>e.w_size-X?e.strstart-(e.w_size-X):0,l=e.window,h=e.w_mask,c=e.prev,u=e.strstart+ne;let f=l[n+s-1],p=l[n+s];e.prev_length>=e.good_match&&(t>>=2),o>e.lookahead&&(o=e.lookahead);do if(a=i,!(l[a+s]!==p||l[a+s-1]!==f||l[a]!==l[n]||l[++a]!==l[n+1])){n+=2,a++;do;while(l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&n<u);if(r=ne-(u-n),n=u-ne,r>s){if(e.match_start=i,s=r,r>=o)break;f=l[n+s-1],p=l[n+s]}}while((i=c[i&h])>d&&--t!==0);return s<=e.lookahead?s:e.lookahead},be=e=>{const i=e.w_size;let t,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-X)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),xa(e),n+=i),e.strm.avail_in===0)break;if(t=At(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=A)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=le(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=le(e,e.ins_h,e.window[a+A-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<A)););}while(e.lookahead<X&&e.strm.avail_in!==0)},qi=(e,i)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,r,s=0,o=e.strm.avail_in;do{if(n=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r||(r=e.strm.avail_out-r,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>r&&(n=r),n<t&&(n===0&&i!==Z||i===re||n!==a+e.strm.avail_in)))break;s=i===Z&&n===a+e.strm.avail_in?1:0,Et(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,M(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(At(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(s===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?Ie:i!==re&&i!==Z&&e.strm.avail_in===0&&e.strstart===e.block_start?Ee:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(At(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,t=r>e.w_size?e.w_size:r,a=e.strstart-e.block_start,(a>=t||(a||i===Z)&&i!==re&&e.strm.avail_in===0&&a<=r)&&(n=a>r?r:a,s=i===Z&&e.strm.avail_in===0&&n===a?1:0,Et(e,e.block_start,n,s),e.block_start+=n,M(e.strm)),s?de:O)},ft=(e,i)=>{let t,n;for(;;){if(e.lookahead<X){if(be(e),e.lookahead<X&&i===re)return O;if(e.lookahead===0)break}if(t=0,e.lookahead>=A&&(e.ins_h=le(e,e.ins_h,e.window[e.strstart+A-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-X&&(e.match_length=Ki(e,t)),e.match_length>=A)if(n=ae(e,e.strstart-e.match_start,e.match_length-A),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=A){e.match_length--;do e.strstart++,e.ins_h=le(e,e.ins_h,e.window[e.strstart+A-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=le(e,e.ins_h,e.window[e.strstart+1]);else n=ae(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(V(e,!1),e.strm.avail_out===0))return O}return e.insert=e.strstart<A-1?e.strstart:A-1,i===Z?(V(e,!0),e.strm.avail_out===0?de:Ie):e.sym_next&&(V(e,!1),e.strm.avail_out===0)?O:Ee},_e=(e,i)=>{let t,n,a;for(;;){if(e.lookahead<X){if(be(e),e.lookahead<X&&i===re)return O;if(e.lookahead===0)break}if(t=0,e.lookahead>=A&&(e.ins_h=le(e,e.ins_h,e.window[e.strstart+A-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=A-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-X&&(e.match_length=Ki(e,t),e.match_length<=5&&(e.strategy===ra||e.match_length===A&&e.strstart-e.match_start>4096)&&(e.match_length=A-1)),e.prev_length>=A&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-A,n=ae(e,e.strstart-1-e.prev_match,e.prev_length-A),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=le(e,e.ins_h,e.window[e.strstart+A-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=A-1,e.strstart++,n&&(V(e,!1),e.strm.avail_out===0))return O}else if(e.match_available){if(n=ae(e,0,e.window[e.strstart-1]),n&&V(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return O}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=ae(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<A-1?e.strstart:A-1,i===Z?(V(e,!0),e.strm.avail_out===0?de:Ie):e.sym_next&&(V(e,!1),e.strm.avail_out===0)?O:Ee},Ea=(e,i)=>{let t,n,a,r;const s=e.window;for(;;){if(e.lookahead<=ne){if(be(e),e.lookahead<=ne&&i===re)return O;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=A&&e.strstart>0&&(a=e.strstart-1,n=s[a],n===s[++a]&&n===s[++a]&&n===s[++a])){r=e.strstart+ne;do;while(n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&a<r);e.match_length=ne-(r-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=A?(t=ae(e,1,e.match_length-A),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=ae(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(V(e,!1),e.strm.avail_out===0))return O}return e.insert=0,i===Z?(V(e,!0),e.strm.avail_out===0?de:Ie):e.sym_next&&(V(e,!1),e.strm.avail_out===0)?O:Ee},Ia=(e,i)=>{let t;for(;;){if(e.lookahead===0&&(be(e),e.lookahead===0)){if(i===re)return O;break}if(e.match_length=0,t=ae(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(V(e,!1),e.strm.avail_out===0))return O}return e.insert=0,i===Z?(V(e,!0),e.strm.avail_out===0?de:Ie):e.sym_next&&(V(e,!1),e.strm.avail_out===0)?O:Ee};function W(e,i,t,n,a){this.good_length=e,this.max_lazy=i,this.nice_length=t,this.max_chain=n,this.func=a}const Ce=[new W(0,0,0,0,qi),new W(4,4,8,4,ft),new W(4,5,16,8,ft),new W(4,6,32,32,ft),new W(4,4,16,16,_e),new W(8,16,32,32,_e),new W(8,16,128,128,_e),new W(8,32,128,256,_e),new W(32,128,258,1024,_e),new W(32,258,258,4096,_e)],ka=e=>{e.window_size=2*e.w_size,ie(e.head),e.max_lazy_match=Ce[e.level].max_lazy,e.good_match=Ce[e.level].good_length,e.nice_match=Ce[e.level].nice_length,e.max_chain_length=Ce[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=A-1,e.match_available=0,e.ins_h=0};function Ta(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=it,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ma*2),this.dyn_dtree=new Uint16Array((2*_a+1)*2),this.bl_tree=new Uint16Array((2*ga+1)*2),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(wa+1),this.heap=new Uint16Array(2*It+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*It+1),ie(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Me=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||i.status!==we&&i.status!==Zt&&i.status!==kt&&i.status!==Tt&&i.status!==St&&i.status!==Ct&&i.status!==oe&&i.status!==Se?1:0},Qi=e=>{if(Me(e))return he(e,Y);e.total_in=e.total_out=0,e.data_type=ha;const i=e.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap===2?Zt:i.wrap?we:oe,e.adler=i.wrap===2?0:1,i.last_flush=-2,qn(i),L},Ji=e=>{const i=Qi(e);return i===L&&ka(e.state),i},Sa=(e,i)=>Me(e)||e.state.wrap!==2?Y:(e.state.gzhead=i,L),en=(e,i,t,n,a,r)=>{if(!e)return Y;let s=1;if(i===aa&&(i=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>fa||t!==it||n<8||n>15||i<0||i>9||r<0||r>sa||n===8&&s!==1)return he(e,Y);n===8&&(n=9);const o=new Ta;return e.state=o,o.strm=e,o.status=we,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+A-1)/A),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=i,o.strategy=r,o.method=t,Ji(e)},Ca=(e,i)=>en(e,i,it,da,ca,oa),Aa=(e,i)=>{if(Me(e)||i>Qt||i<0)return e?he(e,Y):Y;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Se&&i!==Z)return he(e,e.avail_out===0?ht:Y);const n=t.last_flush;if(t.last_flush=i,t.pending!==0){if(M(e),e.avail_out===0)return t.last_flush=-1,L}else if(e.avail_in===0&&ei(i)<=ei(n)&&i!==Z)return he(e,ht);if(t.status===Se&&e.avail_in!==0)return he(e,ht);if(t.status===we&&t.wrap===0&&(t.status=oe),t.status===we){let a=it+(t.w_bits-8<<4)<<8,r=-1;if(t.strategy>=Ye||t.level<2?r=0:t.level<6?r=1:t.level===6?r=2:r=3,a|=r<<6,t.strstart!==0&&(a|=ba),a+=31-a%31,Te(t,a),t.strstart!==0&&(Te(t,e.adler>>>16),Te(t,e.adler&65535)),e.adler=1,t.status=oe,M(e),t.pending!==0)return t.last_flush=-1,L}if(t.status===Zt){if(e.adler=0,z(t,31),z(t,139),z(t,8),t.gzhead)z(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),z(t,t.gzhead.time&255),z(t,t.gzhead.time>>8&255),z(t,t.gzhead.time>>16&255),z(t,t.gzhead.time>>24&255),z(t,t.level===9?2:t.strategy>=Ye||t.level<2?4:0),z(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(z(t,t.gzhead.extra.length&255),z(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=te(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=kt;else if(z(t,0),z(t,0),z(t,0),z(t,0),z(t,0),z(t,t.level===9?2:t.strategy>=Ye||t.level<2?4:0),z(t,va),t.status=oe,M(e),t.pending!==0)return t.last_flush=-1,L}if(t.status===kt){if(t.gzhead.extra){let a=t.pending,r=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+r>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=te(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=o,M(e),t.pending!==0)return t.last_flush=-1,L;a=0,r-=o}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+r),t.pending),t.pending+=r,t.gzhead.hcrc&&t.pending>a&&(e.adler=te(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=Tt}if(t.status===Tt){if(t.gzhead.name){let a=t.pending,r;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=te(e.adler,t.pending_buf,t.pending-a,a)),M(e),t.pending!==0)return t.last_flush=-1,L;a=0}t.gzindex<t.gzhead.name.length?r=t.gzhead.name.charCodeAt(t.gzindex++)&255:r=0,z(t,r)}while(r!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=te(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=St}if(t.status===St){if(t.gzhead.comment){let a=t.pending,r;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=te(e.adler,t.pending_buf,t.pending-a,a)),M(e),t.pending!==0)return t.last_flush=-1,L;a=0}t.gzindex<t.gzhead.comment.length?r=t.gzhead.comment.charCodeAt(t.gzindex++)&255:r=0,z(t,r)}while(r!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=te(e.adler,t.pending_buf,t.pending-a,a))}t.status=Ct}if(t.status===Ct){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(M(e),t.pending!==0))return t.last_flush=-1,L;z(t,e.adler&255),z(t,e.adler>>8&255),e.adler=0}if(t.status=oe,M(e),t.pending!==0)return t.last_flush=-1,L}if(e.avail_in!==0||t.lookahead!==0||i!==re&&t.status!==Se){let a=t.level===0?qi(t,i):t.strategy===Ye?Ia(t,i):t.strategy===la?Ea(t,i):Ce[t.level].func(t,i);if((a===de||a===Ie)&&(t.status=Se),a===O||a===de)return e.avail_out===0&&(t.last_flush=-1),L;if(a===Ee&&(i===ta?Jn(t):i!==Qt&&(Et(t,0,0,!1),i===ia&&(ie(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),M(e),e.avail_out===0))return t.last_flush=-1,L}return i!==Z?L:t.wrap<=0?Jt:(t.wrap===2?(z(t,e.adler&255),z(t,e.adler>>8&255),z(t,e.adler>>16&255),z(t,e.adler>>24&255),z(t,e.total_in&255),z(t,e.total_in>>8&255),z(t,e.total_in>>16&255),z(t,e.total_in>>24&255)):(Te(t,e.adler>>>16),Te(t,e.adler&65535)),M(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?L:Jt)},Ua=e=>{if(Me(e))return Y;const i=e.state.status;return e.state=null,i===oe?he(e,na):L},za=(e,i)=>{let t=i.length;if(Me(e))return Y;const n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==we||n.lookahead)return Y;if(a===1&&(e.adler=Gi(e.adler,i,t,0)),n.wrap=0,t>=n.w_size){a===0&&(ie(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(i.subarray(t-n.w_size,t),0),i=d,t=n.w_size}const r=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=i,be(n);n.lookahead>=A;){let d=n.strstart,l=n.lookahead-(A-1);do n.ins_h=le(n,n.ins_h,n.window[d+A-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--l);n.strstart=d,n.lookahead=A-1,be(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=A-1,n.match_available=0,e.next_in=s,e.input=o,e.avail_in=r,n.wrap=a,L};K.deflateInit=Ca;K.deflateInit2=en;K.deflateReset=Ji;K.deflateResetKeep=Qi;K.deflateSetHeader=Sa;K.deflate=Aa;K.deflateEnd=Ua;K.deflateSetDictionary=za;K.deflateInfo="pako deflate (from Nodeca project)";var nt={};const Da=(e,i)=>Object.prototype.hasOwnProperty.call(e,i);nt.assign=function(e){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const t=i.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)Da(t,n)&&(e[n]=t[n])}}return e};nt.flattenChunks=e=>{let i=0;for(let n=0,a=e.length;n<a;n++)i+=e[n].length;const t=new Uint8Array(i);for(let n=0,a=0,r=e.length;n<r;n++){let s=e[n];t.set(s,a),a+=s.length}return t};var Ve={};let tn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tn=!1}const Ne=new Uint8Array(256);for(let e=0;e<256;e++)Ne[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ne[254]=Ne[254]=1;Ve.string2buf=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let i,t,n,a,r,s=e.length,o=0;for(a=0;a<s;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(i=new Uint8Array(o),r=0,a=0;r<o;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),t<128?i[r++]=t:t<2048?(i[r++]=192|t>>>6,i[r++]=128|t&63):t<65536?(i[r++]=224|t>>>12,i[r++]=128|t>>>6&63,i[r++]=128|t&63):(i[r++]=240|t>>>18,i[r++]=128|t>>>12&63,i[r++]=128|t>>>6&63,i[r++]=128|t&63);return i};const $a=(e,i)=>{if(i<65534&&e.subarray&&tn)return String.fromCharCode.apply(null,e.length===i?e:e.subarray(0,i));let t="";for(let n=0;n<i;n++)t+=String.fromCharCode(e[n]);return t};Ve.buf2string=(e,i)=>{const t=i||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,i));let n,a;const r=new Array(t*2);for(a=0,n=0;n<t;){let s=e[n++];if(s<128){r[a++]=s;continue}let o=Ne[s];if(o>4){r[a++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<t;)s=s<<6|e[n++]&63,o--;if(o>1){r[a++]=65533;continue}s<65536?r[a++]=s:(s-=65536,r[a++]=55296|s>>10&1023,r[a++]=56320|s&1023)}return $a(r,a)};Ve.utf8border=(e,i)=>{i=i||e.length,i>e.length&&(i=e.length);let t=i-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?i:t+Ne[e[t]]>i?t:i};function Ra(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nn=Ra;const Ue=K,an=nt,rn=Ve,Ut=Vt,La=nn,ln=Object.prototype.toString,{Z_NO_FLUSH:Na,Z_SYNC_FLUSH:Oa,Z_FULL_FLUSH:Ha,Z_FINISH:Ma,Z_OK:et,Z_STREAM_END:Va,Z_DEFAULT_COMPRESSION:Za,Z_DEFAULT_STRATEGY:Fa,Z_DEFLATED:Pa}=ue;function Ze(e){this.options=an.assign({level:Za,method:Pa,chunkSize:16384,windowBits:15,memLevel:8,strategy:Fa},e||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new La,this.strm.avail_out=0;let t=Ue.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(t!==et)throw new Error(Ut[t]);if(i.header&&Ue.deflateSetHeader(this.strm,i.header),i.dictionary){let n;if(typeof i.dictionary=="string"?n=rn.string2buf(i.dictionary):ln.call(i.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(i.dictionary):n=i.dictionary,t=Ue.deflateSetDictionary(this.strm,n),t!==et)throw new Error(Ut[t]);this._dict_set=!0}}Ze.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize;let a,r;if(this.ended)return!1;for(i===~~i?r=i:r=i===!0?Ma:Na,typeof e=="string"?t.input=rn.string2buf(e):ln.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(r===Oa||r===Ha)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(a=Ue.deflate(t,r),a===Va)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=Ue.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===et;if(t.avail_out===0){this.onData(t.output);continue}if(r>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Ze.prototype.onData=function(e){this.chunks.push(e)};Ze.prototype.onEnd=function(e){e===et&&(this.result=an.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Ft(e,i){const t=new Ze(i);if(t.push(e,!0),t.err)throw t.msg||Ut[t.err];return t.result}function Wa(e,i){return i=i||{},i.raw=!0,Ft(e,i)}function Ba(e,i){return i=i||{},i.gzip=!0,Ft(e,i)}ve.Deflate=Ze;ve.deflate=Ft;ve.deflateRaw=Wa;ve.gzip=Ba;ve.constants=ue;var ke={},P={};const Xe=16209,ja=16191;var Ya=function(i,t){let n,a,r,s,o,d,l,h,c,u,f,p,b,v,g,E,y,_,x,U,m,T,I,k;const S=i.state;n=i.next_in,I=i.input,a=n+(i.avail_in-5),r=i.next_out,k=i.output,s=r-(t-i.avail_out),o=r+(i.avail_out-257),d=S.dmax,l=S.wsize,h=S.whave,c=S.wnext,u=S.window,f=S.hold,p=S.bits,b=S.lencode,v=S.distcode,g=(1<<S.lenbits)-1,E=(1<<S.distbits)-1;e:do{p<15&&(f+=I[n++]<<p,p+=8,f+=I[n++]<<p,p+=8),y=b[f&g];t:for(;;){if(_=y>>>24,f>>>=_,p-=_,_=y>>>16&255,_===0)k[r++]=y&65535;else if(_&16){x=y&65535,_&=15,_&&(p<_&&(f+=I[n++]<<p,p+=8),x+=f&(1<<_)-1,f>>>=_,p-=_),p<15&&(f+=I[n++]<<p,p+=8,f+=I[n++]<<p,p+=8),y=v[f&E];i:for(;;){if(_=y>>>24,f>>>=_,p-=_,_=y>>>16&255,_&16){if(U=y&65535,_&=15,p<_&&(f+=I[n++]<<p,p+=8,p<_&&(f+=I[n++]<<p,p+=8)),U+=f&(1<<_)-1,U>d){i.msg="invalid distance too far back",S.mode=Xe;break e}if(f>>>=_,p-=_,_=r-s,U>_){if(_=U-_,_>h&&S.sane){i.msg="invalid distance too far back",S.mode=Xe;break e}if(m=0,T=u,c===0){if(m+=l-_,_<x){x-=_;do k[r++]=u[m++];while(--_);m=r-U,T=k}}else if(c<_){if(m+=l+c-_,_-=c,_<x){x-=_;do k[r++]=u[m++];while(--_);if(m=0,c<x){_=c,x-=_;do k[r++]=u[m++];while(--_);m=r-U,T=k}}}else if(m+=c-_,_<x){x-=_;do k[r++]=u[m++];while(--_);m=r-U,T=k}for(;x>2;)k[r++]=T[m++],k[r++]=T[m++],k[r++]=T[m++],x-=3;x&&(k[r++]=T[m++],x>1&&(k[r++]=T[m++]))}else{m=r-U;do k[r++]=k[m++],k[r++]=k[m++],k[r++]=k[m++],x-=3;while(x>2);x&&(k[r++]=k[m++],x>1&&(k[r++]=k[m++]))}}else if(_&64){i.msg="invalid distance code",S.mode=Xe;break e}else{y=v[(y&65535)+(f&(1<<_)-1)];continue i}break}}else if(_&64)if(_&32){S.mode=ja;break e}else{i.msg="invalid literal/length code",S.mode=Xe;break e}else{y=b[(y&65535)+(f&(1<<_)-1)];continue t}break}}while(n<a&&r<o);x=p>>3,n-=x,p-=x<<3,f&=(1<<p)-1,i.next_in=n,i.next_out=r,i.avail_in=n<a?5+(a-n):5-(n-a),i.avail_out=r<o?257+(o-r):257-(r-o),S.hold=f,S.bits=p};const ge=15,ti=852,ii=592,ni=0,dt=1,ai=2,Xa=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ga=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ka=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),qa=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Qa=(e,i,t,n,a,r,s,o)=>{const d=o.bits;let l=0,h=0,c=0,u=0,f=0,p=0,b=0,v=0,g=0,E=0,y,_,x,U,m,T=null,I;const k=new Uint16Array(ge+1),S=new Uint16Array(ge+1);let q=null,Pe,We,Be;for(l=0;l<=ge;l++)k[l]=0;for(h=0;h<n;h++)k[i[t+h]]++;for(f=d,u=ge;u>=1&&k[u]===0;u--);if(f>u&&(f=u),u===0)return a[r++]=1<<24|64<<16|0,a[r++]=1<<24|64<<16|0,o.bits=1,0;for(c=1;c<u&&k[c]===0;c++);for(f<c&&(f=c),v=1,l=1;l<=ge;l++)if(v<<=1,v-=k[l],v<0)return-1;if(v>0&&(e===ni||u!==1))return-1;for(S[1]=0,l=1;l<ge;l++)S[l+1]=S[l]+k[l];for(h=0;h<n;h++)i[t+h]!==0&&(s[S[i[t+h]]++]=h);if(e===ni?(T=q=s,I=20):e===dt?(T=Xa,q=Ga,I=257):(T=Ka,q=qa,I=0),E=0,h=0,l=c,m=r,p=f,b=0,x=-1,g=1<<f,U=g-1,e===dt&&g>ti||e===ai&&g>ii)return 1;for(;;){Pe=l-b,s[h]+1<I?(We=0,Be=s[h]):s[h]>=I?(We=q[s[h]-I],Be=T[s[h]-I]):(We=32+64,Be=0),y=1<<l-b,_=1<<p,c=_;do _-=y,a[m+(E>>b)+_]=Pe<<24|We<<16|Be|0;while(_!==0);for(y=1<<l-1;E&y;)y>>=1;if(y!==0?(E&=y-1,E+=y):E=0,h++,--k[l]===0){if(l===u)break;l=i[t+s[h]]}if(l>f&&(E&U)!==x){for(b===0&&(b=f),m+=c,p=l-b,v=1<<p;p+b<u&&(v-=k[p+b],!(v<=0));)p++,v<<=1;if(g+=1<<p,e===dt&&g>ti||e===ai&&g>ii)return 1;x=E&U,a[x]=f<<24|p<<16|m-r|0}}return E!==0&&(a[m+E]=l-b<<24|64<<16|0),o.bits=f,0};var Ja=Qa;const zt=Yi,B=Xi,er=Ya,ze=Ja,tr=0,sn=1,on=2,{Z_FINISH:ri,Z_BLOCK:ir,Z_TREES:Ge,Z_OK:ce,Z_STREAM_END:nr,Z_NEED_DICT:ar,Z_STREAM_ERROR:F,Z_DATA_ERROR:hn,Z_MEM_ERROR:fn,Z_BUF_ERROR:rr,Z_DEFLATED:li}=ue,at=16180,si=16181,oi=16182,hi=16183,fi=16184,di=16185,ci=16186,ui=16187,pi=16188,_i=16189,tt=16190,Q=16191,ct=16192,gi=16193,ut=16194,mi=16195,wi=16196,bi=16197,vi=16198,Ke=16199,qe=16200,xi=16201,yi=16202,Ei=16203,Ii=16204,ki=16205,pt=16206,Ti=16207,Si=16208,D=16209,dn=16210,cn=16211,lr=852,sr=592,or=15,hr=or,Ci=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function fr(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pe=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||i.mode<at||i.mode>cn?1:0},un=e=>{if(pe(e))return F;const i=e.state;return e.total_in=e.total_out=i.total=0,e.msg="",i.wrap&&(e.adler=i.wrap&1),i.mode=at,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(lr),i.distcode=i.distdyn=new Int32Array(sr),i.sane=1,i.back=-1,ce},pn=e=>{if(pe(e))return F;const i=e.state;return i.wsize=0,i.whave=0,i.wnext=0,un(e)},_n=(e,i)=>{let t;if(pe(e))return F;const n=e.state;return i<0?(t=0,i=-i):(t=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?F:(n.window!==null&&n.wbits!==i&&(n.window=null),n.wrap=t,n.wbits=i,pn(e))},gn=(e,i)=>{if(!e)return F;const t=new fr;e.state=t,t.strm=e,t.window=null,t.mode=at;const n=_n(e,i);return n!==ce&&(e.state=null),n},dr=e=>gn(e,hr);let Ai=!0,_t,gt;const cr=e=>{if(Ai){_t=new Int32Array(512),gt=new Int32Array(32);let i=0;for(;i<144;)e.lens[i++]=8;for(;i<256;)e.lens[i++]=9;for(;i<280;)e.lens[i++]=7;for(;i<288;)e.lens[i++]=8;for(ze(sn,e.lens,0,288,_t,0,e.work,{bits:9}),i=0;i<32;)e.lens[i++]=5;ze(on,e.lens,0,32,gt,0,e.work,{bits:5}),Ai=!1}e.lencode=_t,e.lenbits=9,e.distcode=gt,e.distbits=5},mn=(e,i,t,n)=>{let a;const r=e.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(i.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(a=r.wsize-r.wnext,a>n&&(a=n),r.window.set(i.subarray(t-n,t-n+a),r.wnext),n-=a,n?(r.window.set(i.subarray(t-n,t),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0},ur=(e,i)=>{let t,n,a,r,s,o,d,l,h,c,u,f,p,b,v=0,g,E,y,_,x,U,m,T;const I=new Uint8Array(4);let k,S;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pe(e)||!e.output||!e.input&&e.avail_in!==0)return F;t=e.state,t.mode===Q&&(t.mode=ct),s=e.next_out,a=e.output,d=e.avail_out,r=e.next_in,n=e.input,o=e.avail_in,l=t.hold,h=t.bits,c=o,u=d,T=ce;e:for(;;)switch(t.mode){case at:if(t.wrap===0){t.mode=ct;break}for(;h<16;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,I[0]=l&255,I[1]=l>>>8&255,t.check=B(t.check,I,2,0),l=0,h=0,t.mode=si;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=D;break}if((l&15)!==li){e.msg="unknown compression method",t.mode=D;break}if(l>>>=4,h-=4,m=(l&15)+8,t.wbits===0&&(t.wbits=m),m>15||m>t.wbits){e.msg="invalid window size",t.mode=D;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?_i:Q,l=0,h=0;break;case si:for(;h<16;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if(t.flags=l,(t.flags&255)!==li){e.msg="unknown compression method",t.mode=D;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=D;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,t.check=B(t.check,I,2,0)),l=0,h=0,t.mode=oi;case oi:for(;h<32;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,I[2]=l>>>16&255,I[3]=l>>>24&255,t.check=B(t.check,I,4,0)),l=0,h=0,t.mode=hi;case hi:for(;h<16;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,t.check=B(t.check,I,2,0)),l=0,h=0,t.mode=fi;case fi:if(t.flags&1024){for(;h<16;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(I[0]=l&255,I[1]=l>>>8&255,t.check=B(t.check,I,2,0)),l=0,h=0}else t.head&&(t.head.extra=null);t.mode=di;case di:if(t.flags&1024&&(f=t.length,f>o&&(f=o),f&&(t.head&&(m=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(r,r+f),m)),t.flags&512&&t.wrap&4&&(t.check=B(t.check,n,f,r)),o-=f,r+=f,t.length-=f),t.length))break e;t.length=0,t.mode=ci;case ci:if(t.flags&2048){if(o===0)break e;f=0;do m=n[r+f++],t.head&&m&&t.length<65536&&(t.head.name+=String.fromCharCode(m));while(m&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=B(t.check,n,f,r)),o-=f,r+=f,m)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=ui;case ui:if(t.flags&4096){if(o===0)break e;f=0;do m=n[r+f++],t.head&&m&&t.length<65536&&(t.head.comment+=String.fromCharCode(m));while(m&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=B(t.check,n,f,r)),o-=f,r+=f,m)break e}else t.head&&(t.head.comment=null);t.mode=pi;case pi:if(t.flags&512){for(;h<16;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=D;break}l=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Q;break;case _i:for(;h<32;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}e.adler=t.check=Ci(l),l=0,h=0,t.mode=tt;case tt:if(t.havedict===0)return e.next_out=s,e.avail_out=d,e.next_in=r,e.avail_in=o,t.hold=l,t.bits=h,ar;e.adler=t.check=1,t.mode=Q;case Q:if(i===ir||i===Ge)break e;case ct:if(t.last){l>>>=h&7,h-=h&7,t.mode=pt;break}for(;h<3;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}switch(t.last=l&1,l>>>=1,h-=1,l&3){case 0:t.mode=gi;break;case 1:if(cr(t),t.mode=Ke,i===Ge){l>>>=2,h-=2;break e}break;case 2:t.mode=wi;break;case 3:e.msg="invalid block type",t.mode=D}l>>>=2,h-=2;break;case gi:for(l>>>=h&7,h-=h&7;h<32;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=D;break}if(t.length=l&65535,l=0,h=0,t.mode=ut,i===Ge)break e;case ut:t.mode=mi;case mi:if(f=t.length,f){if(f>o&&(f=o),f>d&&(f=d),f===0)break e;a.set(n.subarray(r,r+f),s),o-=f,r+=f,d-=f,s+=f,t.length-=f;break}t.mode=Q;break;case wi:for(;h<14;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if(t.nlen=(l&31)+257,l>>>=5,h-=5,t.ndist=(l&31)+1,l>>>=5,h-=5,t.ncode=(l&15)+4,l>>>=4,h-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=D;break}t.have=0,t.mode=bi;case bi:for(;t.have<t.ncode;){for(;h<3;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}t.lens[q[t.have++]]=l&7,l>>>=3,h-=3}for(;t.have<19;)t.lens[q[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,k={bits:t.lenbits},T=ze(tr,t.lens,0,19,t.lencode,0,t.work,k),t.lenbits=k.bits,T){e.msg="invalid code lengths set",t.mode=D;break}t.have=0,t.mode=vi;case vi:for(;t.have<t.nlen+t.ndist;){for(;v=t.lencode[l&(1<<t.lenbits)-1],g=v>>>24,E=v>>>16&255,y=v&65535,!(g<=h);){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if(y<16)l>>>=g,h-=g,t.lens[t.have++]=y;else{if(y===16){for(S=g+2;h<S;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if(l>>>=g,h-=g,t.have===0){e.msg="invalid bit length repeat",t.mode=D;break}m=t.lens[t.have-1],f=3+(l&3),l>>>=2,h-=2}else if(y===17){for(S=g+3;h<S;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}l>>>=g,h-=g,m=0,f=3+(l&7),l>>>=3,h-=3}else{for(S=g+7;h<S;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}l>>>=g,h-=g,m=0,f=11+(l&127),l>>>=7,h-=7}if(t.have+f>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=D;break}for(;f--;)t.lens[t.have++]=m}}if(t.mode===D)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=D;break}if(t.lenbits=9,k={bits:t.lenbits},T=ze(sn,t.lens,0,t.nlen,t.lencode,0,t.work,k),t.lenbits=k.bits,T){e.msg="invalid literal/lengths set",t.mode=D;break}if(t.distbits=6,t.distcode=t.distdyn,k={bits:t.distbits},T=ze(on,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,k),t.distbits=k.bits,T){e.msg="invalid distances set",t.mode=D;break}if(t.mode=Ke,i===Ge)break e;case Ke:t.mode=qe;case qe:if(o>=6&&d>=258){e.next_out=s,e.avail_out=d,e.next_in=r,e.avail_in=o,t.hold=l,t.bits=h,er(e,u),s=e.next_out,a=e.output,d=e.avail_out,r=e.next_in,n=e.input,o=e.avail_in,l=t.hold,h=t.bits,t.mode===Q&&(t.back=-1);break}for(t.back=0;v=t.lencode[l&(1<<t.lenbits)-1],g=v>>>24,E=v>>>16&255,y=v&65535,!(g<=h);){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if(E&&!(E&240)){for(_=g,x=E,U=y;v=t.lencode[U+((l&(1<<_+x)-1)>>_)],g=v>>>24,E=v>>>16&255,y=v&65535,!(_+g<=h);){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}l>>>=_,h-=_,t.back+=_}if(l>>>=g,h-=g,t.back+=g,t.length=y,E===0){t.mode=ki;break}if(E&32){t.back=-1,t.mode=Q;break}if(E&64){e.msg="invalid literal/length code",t.mode=D;break}t.extra=E&15,t.mode=xi;case xi:if(t.extra){for(S=t.extra;h<S;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=yi;case yi:for(;v=t.distcode[l&(1<<t.distbits)-1],g=v>>>24,E=v>>>16&255,y=v&65535,!(g<=h);){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if(!(E&240)){for(_=g,x=E,U=y;v=t.distcode[U+((l&(1<<_+x)-1)>>_)],g=v>>>24,E=v>>>16&255,y=v&65535,!(_+g<=h);){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}l>>>=_,h-=_,t.back+=_}if(l>>>=g,h-=g,t.back+=g,E&64){e.msg="invalid distance code",t.mode=D;break}t.offset=y,t.extra=E&15,t.mode=Ei;case Ei:if(t.extra){for(S=t.extra;h<S;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=D;break}t.mode=Ii;case Ii:if(d===0)break e;if(f=u-d,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=D;break}f>t.wnext?(f-=t.wnext,p=t.wsize-f):p=t.wnext-f,f>t.length&&(f=t.length),b=t.window}else b=a,p=s-t.offset,f=t.length;f>d&&(f=d),d-=f,t.length-=f;do a[s++]=b[p++];while(--f);t.length===0&&(t.mode=qe);break;case ki:if(d===0)break e;a[s++]=t.length,d--,t.mode=qe;break;case pt:if(t.wrap){for(;h<32;){if(o===0)break e;o--,l|=n[r++]<<h,h+=8}if(u-=d,e.total_out+=u,t.total+=u,t.wrap&4&&u&&(e.adler=t.check=t.flags?B(t.check,a,u,s-u):zt(t.check,a,u,s-u)),u=d,t.wrap&4&&(t.flags?l:Ci(l))!==t.check){e.msg="incorrect data check",t.mode=D;break}l=0,h=0}t.mode=Ti;case Ti:if(t.wrap&&t.flags){for(;h<32;){if(o===0)break e;o--,l+=n[r++]<<h,h+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=D;break}l=0,h=0}t.mode=Si;case Si:T=nr;break e;case D:T=hn;break e;case dn:return fn;case cn:default:return F}return e.next_out=s,e.avail_out=d,e.next_in=r,e.avail_in=o,t.hold=l,t.bits=h,(t.wsize||u!==e.avail_out&&t.mode<D&&(t.mode<pt||i!==ri))&&mn(e,e.output,e.next_out,u-e.avail_out),c-=e.avail_in,u-=e.avail_out,e.total_in+=c,e.total_out+=u,t.total+=u,t.wrap&4&&u&&(e.adler=t.check=t.flags?B(t.check,a,u,e.next_out-u):zt(t.check,a,u,e.next_out-u)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Q?128:0)+(t.mode===Ke||t.mode===ut?256:0),(c===0&&u===0||i===ri)&&T===ce&&(T=rr),T},pr=e=>{if(pe(e))return F;let i=e.state;return i.window&&(i.window=null),e.state=null,ce},_r=(e,i)=>{if(pe(e))return F;const t=e.state;return t.wrap&2?(t.head=i,i.done=!1,ce):F},gr=(e,i)=>{const t=i.length;let n,a,r;return pe(e)||(n=e.state,n.wrap!==0&&n.mode!==tt)?F:n.mode===tt&&(a=1,a=zt(a,i,t,0),a!==n.check)?hn:(r=mn(e,i,t,t),r?(n.mode=dn,fn):(n.havedict=1,ce))};P.inflateReset=pn;P.inflateReset2=_n;P.inflateResetKeep=un;P.inflateInit=dr;P.inflateInit2=gn;P.inflate=ur;P.inflateEnd=pr;P.inflateGetHeader=_r;P.inflateSetDictionary=gr;P.inflateInfo="pako inflate (from Nodeca project)";function mr(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var wr=mr;const ee=P,wn=nt,Dt=Ve,$t=Vt,br=nn,vr=wr,bn=Object.prototype.toString,{Z_NO_FLUSH:xr,Z_FINISH:yr,Z_OK:Oe,Z_STREAM_END:mt,Z_NEED_DICT:wt,Z_STREAM_ERROR:Er,Z_DATA_ERROR:Ui,Z_MEM_ERROR:Ir}=ue;function Fe(e){this.options=wn.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(e&&e.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15||(i.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new br,this.strm.avail_out=0;let t=ee.inflateInit2(this.strm,i.windowBits);if(t!==Oe)throw new Error($t[t]);if(this.header=new vr,ee.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=Dt.string2buf(i.dictionary):bn.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(t=ee.inflateSetDictionary(this.strm,i.dictionary),t!==Oe)))throw new Error($t[t])}Fe.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let r,s,o;if(this.ended)return!1;for(i===~~i?s=i:s=i===!0?yr:xr,bn.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),r=ee.inflate(t,s),r===wt&&a&&(r=ee.inflateSetDictionary(t,a),r===Oe?r=ee.inflate(t,s):r===Ui&&(r=wt));t.avail_in>0&&r===mt&&t.state.wrap>0&&e[t.next_in]!==0;)ee.inflateReset(t),r=ee.inflate(t,s);switch(r){case Er:case Ui:case wt:case Ir:return this.onEnd(r),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||r===mt))if(this.options.to==="string"){let d=Dt.utf8border(t.output,t.next_out),l=t.next_out-d,h=Dt.buf2string(t.output,d);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(r===Oe&&o===0)){if(r===mt)return r=ee.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Fe.prototype.onData=function(e){this.chunks.push(e)};Fe.prototype.onEnd=function(e){e===Oe&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=wn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Pt(e,i){const t=new Fe(i);if(t.push(e),t.err)throw t.msg||$t[t.err];return t.result}function kr(e,i){return i=i||{},i.raw=!0,Pt(e,i)}ke.Inflate=Fe;ke.inflate=Pt;ke.inflateRaw=kr;ke.ungzip=Pt;ke.constants=ue;const{Deflate:Tr,deflate:Sr,deflateRaw:Cr,gzip:Ar}=ve,{Inflate:Ur,inflate:zr,inflateRaw:Dr,ungzip:$r}=ke,Rr=ue;G.Deflate=Tr;G.deflate=Sr;G.deflateRaw=Cr;G.gzip=Ar;G.Inflate=Ur;G.inflate=zr;G.inflateRaw=Dr;G.ungzip=$r;G.constants=Rr;Object.defineProperty(Lt,"__esModule",{value:!0});var vn=Lt.AsepriteParser=void 0;const Lr=G;var N;(function(e){e[e.OldPalletChunk1=4]="OldPalletChunk1",e[e.OldPalletChunk2=17]="OldPalletChunk2",e[e.LayerChunk=8196]="LayerChunk",e[e.CelChunk=8197]="CelChunk",e[e.CelExtraChunk=8198]="CelExtraChunk",e[e.ColorProfileChunk=8199]="ColorProfileChunk",e[e.ExternalFilesChunk=8200]="ExternalFilesChunk",e[e.MaskChunk=8214]="MaskChunk",e[e.TagsChunk=8216]="TagsChunk",e[e.PalletChunk=8217]="PalletChunk",e[e.UserDataChunk=8224]="UserDataChunk",e[e.SliceChunk=8226]="SliceChunk",e[e.TileSetChunk=8227]="TileSetChunk"})(N||(N={}));class Nr{constructor(i){this.filepath="",this.loaded=!1,this._parseFrames=async t=>new Promise(async(n,a)=>{let r,s,o,d=0,l=[];const h=t.slice(128);let c=0;const u=[];for(let f=0;f<this.header.frameCount;f++){new DataView(h.buffer).getUint32(c,!0),new DataView(h.buffer).getUint16(c+4,!0),r=new DataView(h.buffer).getUint16(c+6,!0),d=new DataView(h.buffer).getUint16(c+8,!0),s=new DataView(h.buffer).getUint32(c+12,!0),o=s===0?r:s,c+=16,l=[];for(let p=0;p<o;p++){let b=new DataView(h.buffer).getUint32(c,!0);const v=c;switch(new DataView(h.buffer).getUint16(c+4,!0)){case N.OldPalletChunk1:break;case N.OldPalletChunk2:break;case N.LayerChunk:this._readLayersChunk(c,h.buffer);break;case N.CelChunk:let E=this._readCelChunk(c,h,b,v);l.push(E);break;case N.CelExtraChunk:break;case N.ColorProfileChunk:break;case N.ExternalFilesChunk:break;case N.MaskChunk:break;case N.TagsChunk:this._readTagsChunk(c,h);break;case N.PalletChunk:this._readPalletChunk(c,h);break;case N.UserDataChunk:break;case N.SliceChunk:break;case N.TileSetChunk:break}if(c+=b,p==o-1){let E=document.createElement("canvas");E.width=this.header?.imageWidth,E.height=this.header?.imageHeight;let y=E.getContext("2d");y?.clearRect(0,0,this.header?.imageWidth,this.header?.imageHeight),l.forEach(x=>{let U=new Uint8ClampedArray(x?.imageData);const m=new ImageData(U,x?.size.w,x?.size.h);let T=document.createElement("canvas");T.width=x.size.w,T.height=x.size.h,T.getContext("2d")?.putImageData(m,0,0),y?.drawImage(T,x.position.x,x.position.y,x.size.w,x.size.h)});let _=new Image(this.header?.imageWidth,this.header?.imageHeight);await this._asyncLoadImageSrc(_,E.toDataURL()),u.push({layers:l,duration:d,image:_})}}}n(u)}),typeof i=="string"?(this.filepath=i,this.file=void 0):(this.file=i,this.filepath=""),this.reader=new FileReader,this.tags=[],this.palette=[],this.layers=[],this.frames=[]}async initialize(){return new Promise(async(i,t)=>{if(this.filepath!==""){let a=await(await fetch(this.filepath)).blob();this.file=new File([a],"")}this.reader.onload=async n=>{if(!n.target||!n.target.result)throw new Error("Failed to read file.");const a=new Uint8Array(n.target.result);this.header=await this._parseHeader(a),this.frames=await this._parseFrames(a),(!this.header||!this.frames)&&t(this.loaded),this.header.fileSize!=0&&this.frames.length!=0&&(this.loaded=!0),i(this.loaded)},this.reader.onerror=n=>{throw new Error("Failed to read file.")},this.reader.readAsArrayBuffer(this.file)})}getTags(){if(!this.loaded)throw new Error("Aseprite file not loaded");return this.tags}getPalette(){if(!this.loaded)throw new Error("Aseprite file not loaded");return this.palette}async getTaggedAnimation(i,t=!0){if(!this.loaded)throw new Error("Aseprite file not loaded");const n=this.tags.findIndex(r=>i==r.tagName);if(n==-1)throw new Error("tagname not found");return await this.getFrames(this.tags[n].startIndex,this.tags[n].endIndex,t)}async getFrames(i,t,n=!0){if(!this.loaded)throw new Error("Aseprite file not loaded");if(n){let a=[];for(let r=i;r<=t;r++)a.push(this.frames[r].image);return a}else{let a=[];for(let s=i;s<=t;s++)a.push(s);return await this._makeSpriteSheet(a,1,a.length)}}async getSpriteSheet(i){if(!this.loaded)throw new Error("Aseprite file not loaded");return await this._makeSpriteSheet(i.frames,i.rows,i.cols)}getImage(i){if(this._loadCheck(),!!this.frames)return this.frames[i].image}async _parseHeader(i){return new Promise((t,n)=>{const a=i.slice(0,128),r=new DataView(a.buffer).getUint32(0,!0),s=new DataView(a.buffer).getUint16(6,!0),o=new DataView(a.buffer).getUint16(8,!0),d=new DataView(a.buffer).getUint16(10,!0),l=new DataView(a.buffer).getUint16(12,!0);t({fileSize:r,imageWidth:o,imageHeight:d,colorDepth:l,frameCount:s})})}_convertRGBAtoHexSTring(i){function t(o){return o.padStart(2,"0")}const n=t(i.r.toString(16)),a=t(i.g.toString(16)),r=t(i.b.toString(16)),s=t(i.a.toString(16));return`#${n}${a}${r}${s}`}async _makeSpriteSheet(i,t,n){if(!this.loaded)throw new Error("Aseprite file not loaded");let a=[],r=0,s=0,o=0,d=0;this.header&&(o=this.header.imageWidth*n,d=this.header.imageHeight*t);let l=document.createElement("canvas");l.width=o,l.height=d;let h=l.getContext("2d"),c=new Image(o,d),u=0;if(i==="all"){if(this.header)for(let f=0;f<this.header?.frameCount;f++)a.push(f)}else a=[...i];return a.forEach(f=>{s=u%n,r=Math.floor(u/n);let p,b;this.header&&(p=s*this.header?.imageWidth),this.header&&(b=r*this.header?.imageHeight),h?.drawImage(this.frames[f].image,p,b),u++}),await this._asyncLoadImageSrc(c,l.toDataURL()),c}_readByteString(i,t,n){const a=new Uint8Array(n);for(let s=0;s<a.length;s++)a[s]=new DataView(i).getUint8(t+s);return new TextDecoder().decode(a)}_getBytes(i,t,n){return new Uint8Array(n.slice(t,t+i))}_readLayersChunk(i,t){let n=i+6,a=new DataView(t).getInt16(n+16,!0);n+=18;let r=this._readByteString(t,n,a),s=this.layers?.length;this.layers?.push({layerID:s,layerName:r})}_readTagsChunk(i,t){let n=i+6,a=t.buffer,r=new DataView(a).getUint16(n,!0);n+=10;for(let s=0;s<r;s++){let o=new DataView(a).getUint16(n,!0),d=new DataView(a).getUint16(n+2,!0);n+=17;let l=new DataView(a).getUint16(n,!0);n+=2;let h=this._readByteString(a,n,l);n+=l,this.tags?.push({startIndex:o,endIndex:d,tagName:h})}}_readPalletChunk(i,t){let n=i+6,a=t.buffer,r=new DataView(a).getUint32(n,!0);n+=20;for(let s=0;s<r;s++){let o=new DataView(a).getUint8(n+2),d=new DataView(a).getUint8(n+3),l=new DataView(a).getUint8(n+4),h=new DataView(a).getUint8(n+5),c=this._convertRGBAtoHexSTring({r:o,g:d,b:l,a:h});this.palette?.push(c)}}_readCelChunk(i,t,n,a){let r=i+6,s=t.buffer,o=new DataView(s).getUint16(r,!0),d=new DataView(s).getInt16(r+2,!0),l=new DataView(s).getInt16(r+4,!0);new DataView(s).getUint8(r+6);let h=new DataView(s).getUint16(r+7,!0);new DataView(s).getInt16(r+9,!0);let c,u;switch(r+=16,h){case 0:break;case 1:break;case 2:c=new DataView(s).getUint16(r,!0),u=new DataView(s).getUint16(r+2,!0),r+=4;const f=n-(r-a);let p=this._getBytes(f,r,t),b;try{b=(0,Lr.inflate)(p)}catch{throw new Error("Error unpacking compressed Image")}return{layerID:o,position:{x:d,y:l},size:{w:c,h:u},imageData:b}}}_loadCheck(){if(!this.loaded)throw new Error("Aseprite file not loaded")}_asyncLoadImageSrc(i,t){return new Promise((n,a)=>{i.onload=()=>{n()},i.onerror=()=>{a()},i.src=t})}}vn=Lt.AsepriteParser=Nr;const Or=`
/***********************************************************************  
  GENERATED MAP FILE FOR SQUELETO FROM LEVEL EDITOR                       
  THIS WILL INCLUDE THE MAP CLASS AND THE TILEMAP CLASS FOR EACH LEVEL    
  FEEL FREE TO MODIFY AS NEEDED                                  
  IN YOUR SQEUELETO PROJECT DIRECTORY, THIS GOES IN THE /MAP DIRECTORY         
***********************************************************************/  
`,Hr=`
// import needed Squeleto modules
import { Assets } from "@peasy-lib/peasy-assets";
import { GameObject } from "../../_Squeleto/GameObject";
import { TileMap, TileMapConfig, Tile } from "../../_Squeleto/LevelEditor";
import { GameMap, MapConfig } from "../../_Squeleto/MapManager";
`;class Mr{filename;fileString;mapName;maps;tileset;mapdims;rows;cols;tilesize;constructor(i,t,n,a,r,s){this.filename=i,this.maps=[],this.tileset=[],this.fileString="",this.mapName=t,this.mapdims=n,this.rows=a,this.cols=r,this.tilesize=s}loadMapData(i){this.maps=[...i]}loadTileSet(i){this.tileset=[...i]}writeFile(){if(this.maps.length==0)return-1;if(this.tileset.length==0)return-2;this.fileString="",this.fileString=this.fileString.concat(Or),this.fileString=this.fileString.concat(Hr),this.fileString=this.fileString.concat(`
    export class ${this.mapName} extends GameMap{
      static who: GameObject;
      constructor(assets: any, level: TileMap) {
        let config: MapConfig = {
          name: ${this.mapName},
          width: ${this.mapdims.w},
          height: ${this.mapdims.h},
          `);const i="  layers:[";this.maps.length;let t="";for(let o=0;o<this.maps.length;o++)this.maps[o],t=t.concat(`level[${o}].tileMapImage.src,`);t=t.concat(`],
    `),this.fileString=this.fileString.concat(i,t);let n="  walls:[...";for(let o=0;o<this.maps.length;o++)this.maps[o],n=n.concat(`level[${o}].walls,`);n=n.concat(`],
    `),this.fileString=this.fileString.concat(n),this.fileString=this.fileString.concat(`    triggers:[],
  };  
    super(config);
    }
    
    static async create(assets:any){  
      let levelArray = <any>[]; 
  `),this.maps.forEach((o,d)=>{let l="";l=l.concat(`
      
      const level${d} = await level${d}TileMap.create(assets);
      levelArray.push(level${d});
      `),this.fileString=this.fileString.concat(l)}),this.fileString=this.fileString.concat(`return new ${this.mapName}(assets, levelArray);
      }
    }
    
    `);let a="";this.maps.forEach((o,d)=>{a="",a=a.concat(`class level${d}TileMap extends TileMap{
      
      constructor(config: TileMapConfig, assets: any) {

        super(config);

      `),this.fileString=this.fileString.concat(a),a="",this.tileset.forEach((h,c)=>{let u=`let TileT${c} = new Tile({src: assets, tileWidth:${h.width}, tileHeight:${h.width}, offsetX:${h.offsetX},offsetY:${h.offsetY} });
        `;a=a.concat(u)}),this.fileString=this.fileString.concat(a),this.fileString=this.fileString.concat(`
      let assignmentMap = new Map<string, { tile: Tile; wall: boolean }>();`),a="",this.tileset.forEach((h,c)=>{let u=Zr(c);a=a.concat(u)}),this.fileString=this.fileString.concat(a),this.fileString=this.fileString.concat(`
      this.setTileMapConfig(assignmentMap);
  }
  
  `),this.fileString=this.fileString.concat(`static async create(assets: any) {
    let map = [`);let l=[];for(let h=0;h<this.rows;h++){let c="";c=c.padStart(this.cols," "),l.push(c)}console.log(l),console.log(this.maps[d]),Object.entries(this.maps[d]).forEach(h=>{let[c,u]=h,f=parseInt(c.split("-")[1]),p=parseInt(c.split("-")[0]);console.log(c,f,p,u);let b=parseInt(u)+48;l[f]=Vr(l[f],p,b)}),console.log(l);for(let h=0;h<this.rows;h++)this.fileString=this.fileString.concat(`"${l[h]}",
`);this.fileString=this.fileString.concat(`];

      let config: TileMapConfig = {
        template: map,
        tileSize: ${this.tilesize},
        rows: ${this.rows},
        cols: ${this.cols},
      };

      const mymap = new level${d}TileMap(config, assets);
    await mymap.initialize();
    return mymap;
  }
}

      `)});let r=new Blob([this.fileString],{type:"text/plain"});const s=document.createElement("a");return s.setAttribute("href",URL.createObjectURL(r)),s.setAttribute("download",this.filename),s.click(),s.remove(),0}}function Vr(e,i,t){if(i<0||i>=e.length)return e;const n=e.split("");return n[i]=String.fromCharCode(t),n.join("")}function Zr(e){return'assignmentMap.set("'+String.fromCharCode(48+e)+`", { tile: TileT${e}, wall: false })
`}const w={zoomLevel:1,mapObject:{},selectedTile:void 0,tiles:[],tileset:void 0,isTileSetLoaded:!1,levelWidthInput:void 0,levelHeightInput:void 0,TilesetWidthNumTilesInput:void 0,TileSetContainer:void 0,get getNumTilesWide(){if(this.TilesetWidthNumTilesInput)return parseInt(this.TilesetWidthNumTilesInput.value)},TilesetHeightNumTilesInput:void 0,TileWidthInput:void 0,TileHeightInput:void 0,get getTileWidth(){let e,i;this.TileSetContainer&&(i=this.TileSetContainer.getBoundingClientRect()),this.TileSetContainer&&(e=i?.width),this.TileSetContainer&&i?.height;let t;if(this.TilesetWidthNumTilesInput&&(t=parseInt(this.TilesetWidthNumTilesInput.value)),e&&t)return Math.floor((e-45)/t)},loadfile:void 0,editorCanvas:void 0,gridCanvas:void 0,loadTileset:(e,i)=>{i.isTileSetLoaded||i.loadfile&&i.loadfile.click()},loadASE:async(e,i)=>{if(i.loadfile.files.length==0||i.loadfile.files.length>1)return;const t=new vn(i.loadfile.files[0]);await t.initialize();const n=await t.getSpriteSheet({rows:parseInt(i.TilesetWidthNumTilesInput.value),cols:parseInt(i.TilesetHeightNumTilesInput.value),frames:"all"});if(t.frames){i.tileset=new Image,i.tileset.width=n.width,i.tileset.width=n.height,i.tileset.src=n.src;for(let a=0;a<parseInt(i.TilesetHeightNumTilesInput.value);a++)for(let r=0;r<parseInt(i.TilesetWidthNumTilesInput.value);r++){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=parseInt(i.TileWidthInput.value),s.height=parseInt(i.TileHeightInput.value),o?.drawImage(n,r*parseInt(i.TileWidthInput.value),a*parseInt(i.TileHeightInput.value),parseInt(i.TileWidthInput.value),parseInt(i.TileHeightInput.value),0,0,parseInt(i.TileWidthInput.value),parseInt(i.TileHeightInput.value));const d=s.toDataURL(),l=new Image;l.src=d,i.tiles.push({id:Tn(),image:d,color:"white",imageElement:l,offsetX:r*parseInt(i.TileWidthInput.value),offsetY:a*parseInt(i.TileHeightInput.value),width:parseInt(i.TileWidthInput.value),height:parseInt(i.TileHeightInput.value)})}i.isTileSetLoaded=!0}},exportType:void 0,exportTileMap:(e,i)=>{if(i.exportType!=null&&i.isTileSetLoaded){if(i.exportType=="image"){if(w.editorCanvas){let t=document.createElement("a");t.setAttribute("download","map.png");let n=w.editorCanvas.toDataURL("image/png").replace("image/png","image/octet-stream");t.setAttribute("href",n),t.click(),t.remove()}}else if(i.exportType=="squeleto"){let t,n;w.TileWidthInput&&w.TilesetWidthNumTilesInput&&(t=parseInt(w.TileWidthInput.value)*parseInt(w.TilesetWidthNumTilesInput.value)),w.TileHeightInput&&w.TilesetHeightNumTilesInput&&(n=parseInt(w.TileHeightInput.value)*parseInt(w.TilesetHeightNumTilesInput.value));let a;w.levelHeightInput&&w.levelWidthInput&&w.TileWidthInput&&(a=new Mr("myTileMap.ts","myMap",{w:t,h:n},parseInt(w.levelHeightInput.value),parseInt(w.levelWidthInput.value),parseInt(w.TileWidthInput.value))),a?.loadMapData([w.mapObject]),a?.loadTileSet(w.tiles),a?.writeFile()}}},chgeCanvas:()=>{xn()},selectTile:(e,i,t,n,a)=>{a.$parent.$model.selectedTile;let r=t.getAttribute("data-index");Pr(),i.tile.color="red",a.$parent.$model.selectedTile=r,zi()},drawTile:(e,i)=>{if(i.selectedTile==null)return;const t=i.editorCanvas.getBoundingClientRect(),n=parseInt(i.TileWidthInput.value),a=parseInt(i.TileHeightInput.value),r=e.clientX,s=e.clientY,o=r-t.left,d=s-t.top,l=Math.floor(o/n),h=Math.floor(d/a);i.mapObject[`${l}-${h}`]=i.selectedTile,zi()}},Fr=`
<div class="app"> 
<div class="admin">
    <div class="inputs">
        
        <div class="subtitle">Level Dims - in tiles</div>
        <div class="levelInputs">
            <div class="entryFlex">
                <label>Level Width</label>
                <input \${==>levelWidthInput} \${change@=>chgeCanvas} type="number" value="10"></input>
            </div>
            <div class="entryFlex">
                <label>Level Height</label>
                <input \${==>levelHeightInput} \${change@=>chgeCanvas} type="number" value="10"></input>
            </div>
            
        </div>
        
        <div class="subtitle">Tileset Dims  - in pixels</div>
        <div class="levelInputs">
            <div class="entryFlex">
                <label>Num Tiles Wide</label>
                <input \${==>TilesetWidthNumTilesInput}  type="number" value="8"></input>
            </div>
            <div class="entryFlex">
                <label>Num Tiles High</label>
                <input \${==>TilesetHeightNumTilesInput}  type="number" value="4"></input>
            </div>
        </div>
        <div class="subtitle">Tile Dims  - in pixels</div>
        <div class="levelInputs">
            <div class="entryFlex">
                <label>Tile Width</label>
                <input \${==>TileWidthInput}  type="number" value="64"></input> 
            </div>
            <div class="entryFlex">
                <label>Tile Height</label>
                <input \${==>TileHeightInput}  type="number" value="64"></input> 
            </div>
        </div>
    
    </div>
    <div \${==>TileSetContainer} class="tileset" >
        
        <div class="myButton" \${click@=>loadTileset}>LOAD TILESET</div>
        <input \${==>loadfile} class="loadTileset" type='file' \${click@=>loadTileset} \${change@=>loadASE} style="display:none"></input>
        <div class="tiles" style="">
            <div \${tile<=*tiles:id} \${click@=>selectTile} data-index="\${tile.$index}" class="tile" style="width: \${getTileWidth}px;border: 1px solid \${tile.color};background-image: url(\${tile.image})"></div>
        </div>
    </div>
    <div class="export">
        <label>Image</label>
        <input type="radio" name='exportytpe' \${'image'==>exportType} value='image'>
        <label>Squeleto Module</label>
        <input type="radio" name='exportytpe' \${'squeleto'==>exportType} value='squeleto'>
        
        <div class="myButton" \${click@=>exportTileMap} >EXPORT</div>
    </div>
</div>
<div class="editor">
    <canvas \${==>editorCanvas} class="canvas" style="z-index:1"></canvas>
    <canvas \${==>gridCanvas} class="canvas" style="z-index:2" \${click@=>drawTile}></canvas>
</div>


</div>
`;await C.create(document.body,w,Fr).attached;xn();function xn(){w.editorCanvas&&w.levelWidthInput&&w.TileWidthInput&&w.TilesetWidthNumTilesInput&&(w.editorCanvas.width=parseInt(w.levelWidthInput.value)*parseInt(w.TileWidthInput.value)),w.editorCanvas&&w.levelHeightInput&&w.TileHeightInput&&(w.editorCanvas.height=parseInt(w.levelHeightInput.value)*parseInt(w.TileHeightInput.value)),w.editorCanvas&&(w.editorCanvas.style.width=`${w.editorCanvas.width}px`,w.editorCanvas.style.height=`${w.editorCanvas.height}px`),w.gridCanvas&&w.editorCanvas&&(w.gridCanvas.width=w.editorCanvas.width,w.gridCanvas.height=w.editorCanvas.height,w.gridCanvas.style.width=`${w.editorCanvas.width}px`,w.gridCanvas.style.height=`${w.editorCanvas.height}px`),Wr()}function Pr(){w.tiles.forEach(e=>{e.color="white"})}function Wr(){let e;w.gridCanvas&&(e=w.gridCanvas.getContext("2d"));let i,t,n,a;if(w.TileWidthInput&&w.TileHeightInput&&w.levelWidthInput&&w.levelHeightInput&&(i=w.zoomLevel*parseInt(w.TileWidthInput.value),t=w.zoomLevel*parseInt(w.TileHeightInput.value),n=parseInt(w.levelWidthInput.value),a=parseInt(w.levelHeightInput.value)),t&&i&&n&&a){for(var r=0;r<=n;r++)e?.moveTo(r*i,0),e?.lineTo(r*i,t*a);for(var r=0;r<=t;r++)e?.moveTo(0,r*t),e?.lineTo(i*n,r*t);e&&(e.strokeStyle="#bbbbbb"),e?.stroke()}}function zi(){Object.entries(w.mapObject).forEach((e,i)=>{const[t,n]=e;let a;typeof n=="string"?a=parseInt(n):typeof n=="number"?a=n:a=0;const r=w.tiles[a].imageElement,s=t;let o,d;w.TileWidthInput&&w.TileHeightInput&&(o=parseInt(s.split("-")[0])*parseInt(w.TileWidthInput.value),d=parseInt(s.split("-")[1])*parseInt(w.TileHeightInput.value));let l,h;w.TileWidthInput&&(l=parseInt(w.TileWidthInput.value)),w.TileHeightInput&&(h=parseInt(w.TileHeightInput.value));let c;w.editorCanvas&&(c=w.editorCanvas.getContext("2d")),c!=null&&l!=null&&h!=null&&o!=null&&d!=null&&c.drawImage(r,o,d,l,h)})}
